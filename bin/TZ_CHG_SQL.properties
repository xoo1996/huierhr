#####################################################################################################################
#																													#
#---------------------------------------sql\u8bed\u53e5\u5b9a\u4e49\u89c4\u5219---------------------------------------------------------------#
# * \u53d6\u83dc\u5355\u7f16\u53f7\u524d\u4e09\u4f4d+5\u4f4d\u987a\u5e8f\u53f7																		#
# * \u4f8b\u5982\uff1a\u6536\u8d39\u7ba1\u7406chg01_000 chg--\u6536\u8d39\u4fe1\u606f\u6a21\u5757  01--\u666e\u901a\u5546\u54c1\u6536\u8d39\u7ba1\u7406  000--\u5f53\u524d\u5f00\u53d1\u4f7f\u7528sql\u987a\u5e8f\u53f7				#
# *       \u6536\u8d39\u7ba1\u7406chg02_000 chg--\u6536\u8d39\u4fe1\u606f\u6a21\u5757  02--\u5b9a\u5236\u5546\u54c1\u6536\u8d39\u7ba1\u7406  000--\u5f53\u524d\u5f00\u53d1\u4f7f\u7528sql\u987a\u5e8f\u53f7				#
# *       \u6536\u8d39\u7ba1\u7406chg03_000 chg--\u6536\u8d39\u4fe1\u606f\u6a21\u5757  03--\u7ef4\u4fee\u5546\u54c1\u6536\u8d39\u7ba1\u7406  000--\u5f53\u524d\u5f00\u53d1\u4f7f\u7528sql\u987a\u5e8f\u53f7				#
# * \u5177\u4f53\u7f16\u5199\u683c\u5f0f\u4e3e\u4f8b\uff1a																			#
# * #\u5355\u4f4d\u7ba1\u7406#																					#
# * bas01_000=select * from ab01 where aab001=:aab001 and aab004=:aab004						#
# * bas02_002=select * from ab01 where aab002=:aab002 and aab003=:aab003						#
# * 																							#
# * #\u4eba\u5458\u7ba1\u7406#																					#
# * bas02_000=select * from ac01 where aab001=:aab001 and aab004=:aab004						#
# * bas02_001=select * from ac01 where aab002=:aab002 and aab003=:aab003						#
# * 																							#
######################################################################################################################

#\u6536\u8d39\u7ba1\u7406#

#chg01_000\u4e3a\u666e\u901a\u5546\u54c1\u6536\u8d39\u4e2d\u7684norchgquery.jsp\u53d6\u6570\u636e\u7528\u5230\u7684sql\u8bed\u53e5
#chg01_001\u4e3a\u666e\u901a\u5546\u54c1\u6536\u8d39\u4e2d\u7684norchgdetail.jsp\u53d6\u6570\u636e\u7528\u5230\u7684sql\u8bed\u53e5
#chg01_002\u4e3a\u666e\u901a\u5546\u54c1\u6536\u8d39\u4fe1\u606f\u4fdd\u5b58\u5230\u6570\u636e\u5e93\u7684sql\u8bed\u53e5
#chg01_000=select d.*,h.*,g.gctnm as folctnm,p.pdtnm from tblfoldetail d left outer join tblfolio h on h.folno=d.fdtfno left outer join tblgrpclient g on g.gctid=h.folctid left outer join tblproduct p on p.pdtid=d.fdtpid where h.folno like :folno! and g.gctnm like :folctnm! and p.pdtnm like :pdtnm! and h.foldt>=:start! and h.foldt<=:end! and h.foltype='normal' and h.folsta='finish' and p.pdtut='\u53f0' and p.pdtprc>0 and d.fdtrqnt>0 order by h.folsdt
#chg01_000=select stoid,p.pdtnm as stoproname,stoactype,s.stoproid,s.stoamount,s.stoamountun,s.stoproprice,s.stodate,s.storemark,(case when s.stogrcliid='1501000000' then '\u60e0\u8033\u542c\u529b\u603b\u90e8' else g.gctnm end)  as gcltnm from tblsto s left outer join tblproduct p on p.pdtid=s.stoproid left outer join tblgrpclient g on g.gctid=s.stogrcliid where stoproid=:stoproid! and stoamountun=:pdtut! and stoactype=:stoactype! and stogrcliid=:stogrcliid! and s.stodate >= :start! and s.stodate <= :end! 
chg01_000=select i.ictid,i.ictnm,i.ictaddr,i.icttel,i.ictpnm,(case when i.ictgender='0' then '\u5973' when i.ictgender='1' then '\u7537' else '\u65e0' end) as ictgender,g.gctnm as folctnm from tblindclient i left outer join tblgrpclient g on g.gctid=i.ictgctid where i.ictgctid=:ictgctid! and i.ictid=:ictid!
chg01_001=select distinct p.pdtnm as stoproname,s.stoproprice,sum(s.stoamount*s.stoactype)over(partition by s.stoproid) as fdtrqnt,s.stodate,(case when s.stogrcliid='1501000000' then '\u60e0\u8033\u542c\u529b\u603b\u90e8' else g.gctnm end)  as folctnm from tblsto s left outer join tblproduct p on p.pdtid=s.stoproid left outer join tblgrpclient g on g.gctid=s.stogrcliid where stogrcliid=:stogrcliid! and stoproid=:stoproid!
#chg01_002=select i.ictid,i.ictnm,(case when i.ictgender='0' then '\u5973' when i.ictgender='1' then '\u7537' else '\u65e0' end) as ictgender,i.icttel,i.ictaddr,g.gctnm as folctnm,i.ictgctid from tblindclient i left outer join tblgrpclient g on g.gctid=i.ictgctid where ictnm like :ictnm! and ictgender=:ictgender! and ictaddr like :ictaddr! and  ictgctid=:ictgctid! 
chg01_002=select i.ictid,i.ictnm,i.ictgender,i.icttel,i.ictaddr,g.gctnm as folctnm,i.ictgctid from tblindclient i left outer join tblgrpclient g on g.gctid=i.ictgctid where ictnm like :ictnm! and ictgender=:ictgender! and ictaddr like :ictaddr! and  ictgctid=:ictgctid! 
chg01_003=insert into tblindclient (ictid,ictnm,icttel,ictoprcd,ictgctid,ictgender,ictbdt,ictaddr,ictpnm,ictnt,ictpro,ictcity,ictcounty,ictphone,ictlandline,ictdetailaddr) values (:ictid!,:ictnm!,:icttel!,:ictoprcd!,:ictgctid!,:ictgender!,:ictbdt!,:ictaddr!,:ictpnm!,:ictnt!,:ictpro!,:ictcity!,:ictcounty!,:ictphone!,:ictlandline!,:ictdetailaddr!)
charge_detail_insert=insert into tblinddetail (losetime,lstnote,shoushushi,sssnote,yichuanshi,ycsnote,erming,xuanyun,gaoxueya,gaoxuezhi,tangniaobing,tnbnote,zhutingqi,ztqtime,ztqtype,ztqxg,jixing,yanzheng,yznote,gumo,gmnote,jiancha,jcnote,chuandao,cdnote,ganyin,gynote,cdxing,gyxing,hunhexing,hhxnote,chuli,clnote,ictid)values(:losetime!,:lstnote!,:shoushushi!,:sssnote!,:yichuanshi!,:ycsnote!,:erming!,:xuanyun!,:gaoxueya!,:gaoxuezhi!,:tangniaobing!,:tnbnote!,:zhutingqi!,:ztqtime!,:ztqtype!,:ztqxg!,:jixing!,:yanzheng!,:yznote!,:gumo!,:gmnote!,:jiancha!,:jcnote!,:chuandao!,:cdnote!,:ganyin!,:gynote!,:cdxing!,:gyxing!,:hunhexing!,:hhxnote!,:chuli!,:clnote!,:ictid!)
chg01_004=insert into tblnorchg (chgid, chggcltid, chgcltid ,chgpdtid, chgqnt ,chgdis, chgmon, chgdt, chgnt) values (:chgid!,:chggcltid!,:ictid! ,:pdtid!, :fdtmqnt! ,:fdtdisc!, :fdtrprc!, :chgdt!, :chgnt!)
chg01_005=insert into tblsto (stoid,stogrcliid,stoactype,stoamount,stodate,stoproid,stoproname,stoproprice,stoprotype) values (:stoid!,:stogrcliid!,:stoactype!,:stoamount!,:stodate!,:stoproid!,:stoproname!,:stoproprice!,:stoprotype!)
chg01_006=insert into tblnorchg (chgid,chggcltid,chgcltid,chgdt) values (:chgid!,:chggcltid!,:chgcltid!,:chgdt!)
#chg01_007=select i.ictnm,(case i.ictgender when '0' then '\u5973' when '1' then '\u7537' else '\u65e0' end) as ictgender,i.ictaddr,i.icttel,i.ictpnm,g.gctnm as folctnm,o.chgid,r.ncdnt as chgnt,p.pdtnm as pdtnm,p.pdtid as pdtid,p.pdtprc as fdtprc from tblnorchg o left outer join tblindclient i on i.ictid=o.chgcltid left outer join tblgrpclient g on g.gctid=o.chggcltid left outer join tblnorchgdetail r on r.ncdid=o.chgid left outer join tblproduct p on p.pdtid=r.ncdpid where o.chgid=:chgid!
chg01_007=select i.ictid,i.ictnm,(case when i.ictgender='0' then '\u5973' when i.ictgender='1' then '\u7537' else '\u65e0' end) as ictgender,i.icttel,i.ictaddr,i.ictgctid,i.ictpnm,g.gctnm as folctnm,p.pdtnm as pdtnm,p.pdtprc as fdtprc,p.pdtid as pdtid,r.ncdqnt as fdtqnt,r.ncddis as fdtdisc,r.ncdmon as fdtrprc,r.ncdnt as chgnt from tblnorchgdetail r left outer join tblnorchg o on o.chgid=r.ncdid left outer join tblindclient i on i.ictid=o.chgcltid left outer join tblproduct p on p.pdtid=r.ncdpid left outer join tblgrpclient g on g.gctid=o.chggcltid where o.chgid=:chgid!
chg01_008=insert into tblsto (stoid\uff0c stogrcliid\uff0c stoproid\uff0c stoprotype\uff0c stoproname\uff0c stoamountun\uff0c stoamount\uff0c stoactype\uff0c stooprcd\uff0c stodate) values (:stoid!, :stogrcliid!, :stoproid!, :stoprotype!, :stoproname!, :stoamountun!, :stoamount!, :stoactype!, :stooprcd!, :stodate!)

#chg02_000\u4e3a\u5b9a\u5236\u5546\u54c1\u6536\u8d39\u4e2d\u7684cuschgquery.jsp\u53d6\u6570\u636e\u7528\u5230\u7684sql\u8bed\u53e5
#chg02_001\u4e3a\u5b9a\u5236\u5546\u54c1\u6536\u8d39\u4e2d\u7684cuschgdetail.jsp\u53d6\u6570\u636e\u7528\u5230\u7684sql\u8bed\u53e5
#chg02_002\u4e3a\u5b9a\u5236\u5546\u54c1\u6536\u8d39\u4fe1\u606f\u4fdd\u5b58\u5230\u6570\u636e\u5e93\u7684sql\u8bed\u53e5
#chg02_003\u4e3a\u5b9a\u5236\u5546\u54c1\u6536\u8d39\u4e2d\u7684cuschgview.jsp\u663e\u793a\u65f6\u663e\u793a\u6570\u636e\u7528\u5230\u7684sql\u8bed\u53e5
chg02_000=select decode(d.fdtmklr,'0','\u5DE6\u8033','1','\u53F3\u8033','\u65e0') as fdtmklr,d.fdtqnt,d.fdtprc,h.folno,h.foldt,h.folsta,h.foltype ,h.folischg,h.folnt ,decode(h.FOLURGFEE,null,'0',h.folurgfee) as folurgfee,h.foldps as deposit,d.fdtprc+(nvl(h.leftpay,0)+nvl(h.rightpay,0))-(decode(h.FOLDPS,null,'0',h.foldps)) as balance,(nvl(h.leftpay,0)+nvl(h.rightpay,0)) as xubaofee,d.fdtdisc as discount,c.ictaddr as foladdr,decode(d.fdtcltid,null,fdtcltnm,(select c.ictnm from tblindclient c where c.ictid=d.fdtcltid)) as cltnm, g.gctnm as folctnm,p.pdtnm as pdtnm from tblfoldetail d left outer join tblfolio h on h.folno=d.fdtfno left outer join tblgrpclient g on g.gctid=h.folctid left outer join tblproduct p on p.pdtid=d.fdtpid left outer join tblindclient c on c.ictid=d.fdtcltid where c.ictgctid=:ictgctid! and h.folno like :folno! and fdtcltnm like :cltnm! and h.foldt>=:start! and h.foldt<=:end! and h.FOLISCHG=:folischg! and h.foltype='make' and h.folsta in ('finish','recoiled') and h.folctid=:chggcltid! order by h.foldt
chg02_001=select d.*,d.FDTFNO as folno,decode(h.folischg,'0','\u5426','1','\u662f','\u65e0') as folischg,(nvl(h.leftpay,0)+nvl(h.rightpay,0)) as xubaofee,decode(h.folurgischg,'0','\u5426','1','\u662f','\u65e0') as folurgischg,decode(h.FOLURGFEE,null,'0',h.folurgfee) as folurgfee,h.folurgrfee,h.FOLCTID,h.FOLDT,h.FOLNT,h.FOLSTA,h.FOLDES,h.FOLSDT,h.FOLPDT,d.fdtdisc as discount,decode(h.FOLDPS,null,'0',h.foldps) as deposit,h.FOLBAL as balance,h.folchgdt as chgdt,decode(c.ictgender,'0','\u5973','1','\u7537','\u65e0') as ictgender,c.ictnm as cltnm,c.ictpcd,c.icttel,c.ictaddr as ictaddr,a.aaa103 as foltype,decode(d.fdtcltid,null,fdtcltnm,(select c.ictnm from tblindclient c where c.ictid=d.fdtcltid)) as cltnm, g.gctnm as folctnm,p.pdtprc as pdtprc,p.pdtnm as pdtnm from tblfoldetail d left outer join tblfolio h on h.folno=d.fdtfno left outer join tblgrpclient g on g.gctid=h.folctid left outer join tblproduct p on p.pdtid=d.fdtpid left outer join tblindclient c on c.ictid=d.fdtcltid left outer join aa10 a on a.aaa102=h.foltype where d.fdtfno=:folno!  and p.pdtnm=:pdtnm! and a.aaa100='FOLTYPE' and h.folsta='charged'
chg02_002=update tblfolio set folsta=:folsta!,folurgischg=:folurgischg!,folurgrfee=:folurgrfee!,folchgdt=:chgdt!,folnt=:folnt!,folischg=:folischg!,folbal=:balance! where folno=:folno!
chg02_003=select d.*,d.FDTFNO as folno,d.fdtpid as fdtpid,decode(h.folischg,'0','\u5426','1','\u662f','\u65e0') as folischg,h.FOLCTID,h.FOLDT,h.FOLNT,h.FOLSTA,h.FOLDES,h.FOLSDT,h.FOLPDT,h.FOLDPS,h.FOLBAL,h.FOLCHgDT,decode(c.ictgender,'0','\u5973','1','\u7537','\u65e0') as ictgender,c.ictnm as cltnm,c.ictpcd as ictpcd,c.icttel as icttel,c.ictaddr as ictaddr,a.aaa103 as foltype,decode(d.fdtcltid,null,fdtcltnm,(select c.ictnm from tblindclient c where c.ictid=d.fdtcltid)) as cltnm, g.gctnm as folctnm,p.pdtprc as pdtprc from tblfoldetail d left outer join tblfolio h on h.folno=d.fdtfno left outer join tblgrpclient g on g.gctid=h.folctid left outer join tblproduct p on p.pdtid=d.fdtpid left outer join tblindclient c on c.ictid=d.fdtcltid left outer join aa10 a on a.aaa102=h.foltype where d.fdtfno=:folno! and a.aaa100='FOLTYPE' and h.folsta='finish'
chg02_004=select d.*,d.FDTFNO as folno,decode(h.folischg,'0','\u5426','1','\u662f','\u65e0') as folischg,(nvl(h.leftpay,0)+nvl(h.rightpay,0)) as xubaofee,decode(h.FOLURGFEE,null,'0',h.folurgfee) as folurgfee,h.FOLCTID,h.FOLDT,h.FOLNT,h.FOLSTA,h.FOLDES,h.FOLSDT,h.FOLPDT,d.fdtdisc as discount,decode(h.FOLDPS,null,'0',h.foldps) as deposit,d.fdtprc-(decode(h.FOLDPS,null,'0',h.foldps)) as balance,h.folchgdt as chgdt,decode(c.ictgender,'0','\u5973','1','\u7537','\u65e0') as ictgender,c.ictpcd,c.icttel,c.ictaddr as ictaddr,decode(d.fdtcltid,null,fdtcltnm,(select c.ictnm from tblindclient c where c.ictid=d.fdtcltid)) as cltnm, g.gctnm as folctnm,p.pdtprc as pdtprc,p.pdtid as pdtid,p.pdtnm as pdtnm from tblfoldetail d left outer join tblfolio h on h.folno=d.fdtfno left outer join tblgrpclient g on g.gctid=h.folctid left outer join tblproduct p on p.pdtid=d.fdtpid left outer join tblindclient c on c.ictid=d.fdtcltid left outer join aa10 a on a.aaa102=h.foltype where d.fdtfno=:folno!  and p.pdtnm=:pdtnm! and a.aaa100='FOLTYPE' and h.folsta='finish'
chg02_004=select d.*,d.FDTFNO as folno,(nvl(h.leftpay,0)+nvl(h.rightpay,0)) as xubaofee,h.FOLCTID,h.FOLDT,h.folctid,h.FOLNT,h.FOLSTA,h.FOLDES,h.FOLSDT,h.FOLPDT,decode(h.FOLURGFEE,null,'0',h.folurgfee) as folurgfee,d.fdtdisc as discount,decode(h.FOLDPS,null,'0',h.foldps) as deposit,d.fdtprc+(nvl(h.leftpay,0)+nvl(h.rightpay,0))-(decode(h.FOLDPS,null,'0',h.foldps)) as balance,h.folchgdt as chgdt,decode(c.ictgender,'0','\u5973','1','\u7537','\u65e0') as ictgender,c.ictpcd,c.icttel,c.ictaddr as ictaddr, h.foltype,decode(d.fdtcltid,null,fdtcltnm,(select c.ictnm from tblindclient c where c.ictid=d.fdtcltid)) as cltnm, g.gctnm as folctnm,p.pdtprc as pdtprc,p.pdtid as pdtid,p.pdtnm as pdtnm,d.fdtrecmon from tblfoldetail d left outer join tblfolio h on h.folno=d.fdtfno left outer join tblgrpclient g on g.gctid=h.folctid left outer join tblproduct p on p.pdtid=d.fdtpid left outer join tblindclient c on c.ictid=d.fdtcltid  where d.fdtfno=:folno!
chg02_005=select decode(d.fdtmklr,'0','\u5DE6\u8033','1','\u53F3\u8033','\u65e0') as fdtmklr,d.*,(nvl(h.leftpay,0)+nvl(h.rightpay,0)) as xubaofee,d.FDTFNO as folno,decode(h.folischg,'0','\u5426','1','\u662f','\u65e0') as folischg,decode(h.FOLURGFEE,null,'0',h.folurgfee) as folurgfee,h.FOLCTID,h.FOLDT,h.FOLNT,h.FOLSTA,h.FOLDES,h.FOLSDT,h.FOLPDT,d.fdtdisc as discount,decode(h.FOLDPS,null,'0',h.foldps) as deposit,d.fdtprc+(nvl(h.leftpay,0)+nvl(h.rightpay,0))+(decode(h.FOLURGRFEE,null,'0',h.folurgrfee))-(decode(h.FOLDPS,null,'0',h.foldps)) as balance,h.folchgdt as chgdt,decode(c.ictgender,'0','\u5973','1','\u7537','\u65e0') as ictgender,c.ictpcd,c.icttel,c.ictaddr as ictaddr,decode(d.fdtcltid,null,fdtcltnm,(select c.ictnm from tblindclient c where c.ictid=d.fdtcltid)) as cltnm, g.gctnm as folctnm,p.pdtprc as pdtprc,p.pdtnm as pdtnm,p.pdtid from tblfoldetail d left outer join tblfolio h on h.folno=d.fdtfno left outer join tblgrpclient g on g.gctid=h.folctid left outer join tblproduct p on p.pdtid=d.fdtpid left outer join tblindclient c on c.ictid=d.fdtcltid left outer join aa10 a on a.aaa102=h.foltype where d.fdtfno=:folno!

#chg02_004=select d.*,d.FDTFNO as folno,h.FOLCTID,h.FOLDT,h.folctid,h.FOLNT,h.FOLSTA,h.FOLDES,h.FOLSDT,h.FOLPDT,d.fdtdisc as discount,decode(h.FOLDPS,null,'0',h.foldps) as deposit,d.fdtprc-(decode(h.FOLDPS,null,'0',h.foldps)) as balance,h.folchgdt as chgdt,decode(c.ictgender,'0','\u5973','1','\u7537','\u65e0') as ictgender,c.ictnm as cltnm,c.ictpcd,c.icttel,c.ictaddr as ictaddr, h.foltype,decode(d.fdtcltid,null,fdtcltnm,(select c.ictnm from tblindclient c where c.ictid=d.fdtcltid)) as cltnm, g.gctnm as folctnm,p.pdtprc as pdtprc,p.pdtnm as pdtnm,d.fdtrecmon from tblfoldetail d left outer join tblfolio h on h.folno=d.fdtfno left outer join tblgrpclient g on g.gctid=h.folctid left outer join tblproduct p on p.pdtid=d.fdtpid left outer join tblindclient c on c.ictid=d.fdtcltid  where d.fdtfno=:folno!  and p.pdtnm=:pdtnm! and h.folsta=:folsta!
chg02_006=select decode(d.fdtmklr,'0','\u5DE6\u8033','1','\u53F3\u8033','\u65e0') as fdtmklr,d.fdtqnt,d.fdtprc,h.folno,h.foldt ,h.foltype ,h.folsta,decode(h.FOLURGFEE,null,'0',h.folurgfee) as folurgfee,h.folischg,h.folnt ,h.foldps as deposit,(nvl(h.leftpay,0)+nvl(h.rightpay,0)) as xubaofee,d.fdtprc+(nvl(h.leftpay,0)+nvl(h.rightpay,0))-(decode(h.FOLDPS,null,'0',h.foldps)) as balance,d.fdtdisc as discount,c.ictaddr as foladdr,decode(d.fdtcltid,null,fdtcltnm,(select c.ictnm from tblindclient c where c.ictid=d.fdtcltid)) as cltnm, g.gctnm as folctnm,p.pdtnm as pdtnm from tblfoldetail d left outer join tblfolio h on h.folno=d.fdtfno left outer join tblgrpclient g on g.gctid=h.folctid left outer join tblproduct p on p.pdtid=d.fdtpid left outer join tblindclient c on c.ictid=d.fdtcltid where c.ictgctid=:ictgctid! and h.folno like :folno! and fdtcltnm like :cltnm! and h.foldt>=:start! and h.foldt<=:end! and h.FOLISCHG=:folischg! and h.foltype='makeEar' and h.folsta in ('finish','charged','recoiled') and h.folctid=:chggcltid! order by h.foldt
chg02_007=select decode(d.fdtmklr,'0','\u5DE6\u8033','1','\u53F3\u8033','\u65e0') as fdtmklr,(nvl(h.leftpay,0)+nvl(h.rightpay,0)) as xubaofee,d.fdtqnt,d.fdtprc,d.fdtdprc,h.folno,h.foldt,h.folsta,h.foltype ,decode(h.FOLURGFEE,null,'0',h.folurgfee) as folurgfee,h.folischg,h.folnt ,h.foldps as deposit,d.fdtprc+(nvl(h.leftpay,0)+nvl(h.rightpay,0))-(decode(h.FOLDPS,null,'0',h.foldps)) as balance,d.fdtdisc as discount,c.ictaddr as foladdr,decode(d.fdtcltid,null,fdtcltnm,(select c.ictnm from tblindclient c where c.ictid=d.fdtcltid)) as cltnm, g.gctnm as folctnm,p.pdtnm as pdtnm,h.folchgdt,d.fdtodt ,d.fdtrecheaddt from tblfoldetail d left outer join tblfolio h on h.folno=d.fdtfno left outer join tblgrpclient g on g.gctid=h.folctid left outer join tblproduct p on p.pdtid=d.fdtpid left outer join tblindclient c on c.ictid=d.fdtcltid where c.ictgctid=:ictgctid! and h.folno like :folno! and fdtcltnm like :cltnm! and h.foldt>=:start! and h.foldt<=:end! and h.FOLISCHG=:folischg! and h.folsta in('finish','charged','recoiled','recoiledhead','recpass','recback') and h.foltype in ('make','makeEar','makeRec') and h.folctid=:chggcltid!
#chg02_008=update tblfolio set folsta=:folsta!,foltype=:foltype! where folno=:folno!
chg02_008=update tblfolio set folsta=:folsta! where folno=:folno!
chg02_012=update tblfoldetail set fdtodt=:fdtodt! where fdtfno=:folno!
chg02_009=select d.*,d.FDTFNO as folno,decode(h.folischg,'0','\u5426','1','\u662f','\u65e0') as folischg,decode(h.FOLURGFEE,null,'0',h.folurgfee) as folurgfee,h.FOLCTID,h.FOLDT,h.folctid,h.FOLNT,h.FOLSTA,h.FOLDES,h.FOLSDT,h.FOLPDT,d.fdtdisc as discount,decode(h.FOLDPS,null,'0',h.foldps) as deposit,d.fdtprc+(decode(h.FOLURGFEE,null,'0',h.folurgfee))-(decode(h.FOLDPS,null,'0',h.foldps)) as balance,h.folchgdt as chgdt,decode(c.ictgender,'0','\u5973','1','\u7537','\u65e0') as ictgender,c.ictnm as cltnm,c.ictpcd,c.icttel,c.ictaddr as ictaddr,a.aaa103 as foltype,decode(d.fdtcltid,null,fdtcltnm,(select c.ictnm from tblindclient c where c.ictid=d.fdtcltid)) as cltnm, g.gctnm as folctnm,p.pdtprc as pdtprc,p.pdtnm as pdtnm from tblfoldetail d left outer join tblfolio h on h.folno=d.fdtfno left outer join tblgrpclient g on g.gctid=h.folctid left outer join tblproduct p on p.pdtid=d.fdtpid left outer join tblindclient c on c.ictid=d.fdtcltid left outer join aa10 a on a.aaa102=h.foltype where d.fdtfno=:folno!  and p.pdtnm=:pdtnm! and a.aaa100='FOLTYPE' 
chg02_010=select decode(d.fdtmklr,'0','\u5DE6\u8033','1','\u53F3\u8033','\u65e0') as fdtmklr,d.fdtqnt,d.fdtprc,h.folno,h.foldt,h.folsta,h.foltype ,h.folischg,h.folnt ,decode(h.FOLURGFEE,null,'0',h.folurgfee) as folurgfee,h.foldps as deposit,d.fdtprc+(nvl(h.leftpay,0)+nvl(h.rightpay,0))-(decode(h.FOLDPS,null,'0',h.foldps)) as balance,(nvl(h.leftpay,0)+nvl(h.rightpay,0)) as xubaofee,d.fdtdisc as discount,c.ictaddr as foladdr,decode(d.fdtcltid,null,fdtcltnm,(select c.ictnm from tblindclient c where c.ictid=d.fdtcltid)) as cltnm, g.gctnm as folctnm,p.pdtnm as pdtnm from tblfoldetail d left outer join tblfolio h on h.folno=d.fdtfno left outer join tblgrpclient g on g.gctid=h.folctid left outer join tblproduct p on p.pdtid=d.fdtpid left outer join tblindclient c on c.ictid=d.fdtcltid where c.ictgctid=:ictgctid! and h.folno like :folno! and fdtcltnm like :cltnm! and h.foldt>=:start! and h.foldt<=:end! and h.FOLISCHG=:folischg! and h.foltype='makeRec' and h.folsta in ('recoiledhead','recoiled','recback') and h.folctid=:chggcltid! order by h.foldt
chg02_011=select decode(d.fdtmklr,'0','\u5DE6\u8033','1','\u53F3\u8033','\u65e0') as fdtmklr,d.fdtqnt,d.fdtprc,h.folno,h.foldt,h.folsta,h.foltype ,h.folischg,h.folnt ,decode(h.FOLURGFEE,null,'0',h.folurgfee) as folurgfee,h.foldps as deposit,d.fdtprc+(nvl(h.leftpay,0)+nvl(h.rightpay,0))-(decode(h.FOLDPS,null,'0',h.foldps)) as balance,d.fdtdisc as discount,(nvl(h.leftpay,0)+nvl(h.rightpay,0)) as xubaofee,c.ictaddr as foladdr,decode(d.fdtcltid,null,fdtcltnm,(select c.ictnm from tblindclient c where c.ictid=d.fdtcltid)) as cltnm, g.gctnm as folctnm,p.pdtnm as pdtnm from tblfoldetail d left outer join tblfolio h on h.folno=d.fdtfno left outer join tblgrpclient g on g.gctid=h.folctid left outer join tblproduct p on p.pdtid=d.fdtpid left outer join tblindclient c on c.ictid=d.fdtcltid where c.ictgctid=:ictgctid! and h.folno like :folno! and fdtcltnm like :cltnm! and h.foldt>=:start! and h.foldt<=:end! and h.FOLISCHG=:folischg! and h.foltype='geli' and h.folsta in ('recoiledhead','recoiled','recback') and h.folctid=:chggcltid! order by h.foldt

#chg02_0012=update tblfoldetail set fdtprc=:fdtprc!,fdtdisc:=discount! where fdtfno=:folno!
chg021_007=select decode(d.fdtmklr,'0','\u5DE6\u8033','1','\u53F3\u8033','\u65e0') as fdtmklr,d.fdtqnt,d.fdtprc,d.fdtdprc,h.folno,h.foldt,h.folsta,h.foltype ,decode(h.FOLURGFEE,null,'0',h.folurgfee) as folurgfee,(nvl(h.leftpay,0)+nvl(h.rightpay,0)) as xubaofee,h.folischg,h.folnt ,h.foldps as deposit,d.fdtprc+(nvl(h.leftpay,0)+nvl(h.rightpay,0))-(decode(h.FOLDPS,null,'0',h.foldps)) as balance,d.fdtdisc as discount,c.ictaddr as foladdr,decode(d.fdtcltid,null,fdtcltnm,(select c.ictnm from tblindclient c where c.ictid=d.fdtcltid)) as cltnm, g.gctnm as folctnm,p.pdtnm as pdtnm,h.folchgdt,d.fdtodt ,d.fdtrecheaddt from tblfoldetail d left outer join tblfolio h on h.folno=d.fdtfno left outer join tblgrpclient g on g.gctid=h.folctid left outer join tblproduct p on p.pdtid=d.fdtpid left outer join tblindclient c on c.ictid=d.fdtcltid where c.ictgctid=:ictgctid! and h.folno like :folno! and fdtcltnm like :cltnm! and h.foldt>=:start! and h.foldt<=:end! and h.FOLISCHG=:folischg! and h.folsta in('finish','charged','recoiled','recoiledhead','recpass','recback') and h.foltype in ('make','makeEar','makeRec') and h.folctid=:chggcltid! and h.FOLDT>to_date('20140926','YYYYMMDD')
chg021_000=select decode(d.fdtmklr,'0','\u5DE6\u8033','1','\u53F3\u8033','\u65e0') as fdtmklr,d.fdtqnt,d.fdtprc,h.folno,h.foldt,h.folsta,h.foltype ,h.folischg,h.folnt ,decode(h.FOLURGFEE,null,'0',h.folurgfee) as folurgfee,h.foldps as deposit,(nvl(h.leftpay,0)+nvl(h.rightpay,0)) as xubaofee,d.fdtprc+(nvl(h.leftpay,0)+nvl(h.rightpay,0))-(decode(h.FOLDPS,null,'0',h.foldps)) as balance,d.fdtdisc as discount,c.ictaddr as foladdr,decode(d.fdtcltid,null,fdtcltnm,(select c.ictnm from tblindclient c where c.ictid=d.fdtcltid)) as cltnm, g.gctnm as folctnm,p.pdtnm as pdtnm from tblfoldetail d left outer join tblfolio h on h.folno=d.fdtfno left outer join tblgrpclient g on g.gctid=h.folctid left outer join tblproduct p on p.pdtid=d.fdtpid left outer join tblindclient c on c.ictid=d.fdtcltid where c.ictgctid=:ictgctid! and h.folno like :folno! and fdtcltnm like :cltnm! and h.foldt>=:start! and h.foldt<=:end! and h.FOLISCHG=:folischg! and h.foltype='make' and h.folsta in ('finish','recoiled') and h.folctid=:chggcltid! and h.FOLDT>to_date('20150425','YYYYMMDD') order by h.foldt
chg021_006=select decode(d.fdtmklr,'0','\u5DE6\u8033','1','\u53F3\u8033','\u65e0') as fdtmklr,d.fdtqnt,d.fdtprc,h.folno,h.foldt ,h.foltype ,h.folsta,decode(h.FOLURGFEE,null,'0',h.folurgfee) as folurgfee,h.folischg,h.folnt ,h.foldps as deposit,(nvl(h.leftpay,0)+nvl(h.rightpay,0)) as xubaofee,d.fdtprc+(nvl(h.leftpay,0)+nvl(h.rightpay,0))-(decode(h.FOLDPS,null,'0',h.foldps)) as balance,d.fdtdisc as discount,c.ictaddr as foladdr,decode(d.fdtcltid,null,fdtcltnm,(select c.ictnm from tblindclient c where c.ictid=d.fdtcltid)) as cltnm, g.gctnm as folctnm,p.pdtnm as pdtnm from tblfoldetail d left outer join tblfolio h on h.folno=d.fdtfno left outer join tblgrpclient g on g.gctid=h.folctid left outer join tblproduct p on p.pdtid=d.fdtpid left outer join tblindclient c on c.ictid=d.fdtcltid where c.ictgctid=:ictgctid! and h.folno like :folno! and fdtcltnm like :cltnm! and h.foldt>=:start! and h.foldt<=:end! and h.FOLISCHG=:folischg! and h.foltype='makeEar' and h.folsta in ('finish','charged','recoiled') and h.FOLDT>to_date('20150425','YYYYMMDD') and h.folctid=:chggcltid! order by h.foldt
chg021_010=select decode(d.fdtmklr,'0','\u5DE6\u8033','1','\u53F3\u8033','\u65e0') as fdtmklr,d.fdtqnt,d.fdtprc,h.folno,h.foldt,h.folsta,h.foltype ,h.folischg,h.folnt ,decode(h.FOLURGFEE,null,'0',h.folurgfee) as folurgfee,h.foldps as deposit,(nvl(h.leftpay,0)+nvl(h.rightpay,0)) as xubaofee,d.fdtprc+(nvl(h.leftpay,0)+nvl(h.rightpay,0))-(decode(h.FOLDPS,null,'0',h.foldps)) as balance,d.fdtdisc as discount,c.ictaddr as foladdr,decode(d.fdtcltid,null,fdtcltnm,(select c.ictnm from tblindclient c where c.ictid=d.fdtcltid)) as cltnm, g.gctnm as folctnm,p.pdtnm as pdtnm from tblfoldetail d left outer join tblfolio h on h.folno=d.fdtfno left outer join tblgrpclient g on g.gctid=h.folctid left outer join tblproduct p on p.pdtid=d.fdtpid left outer join tblindclient c on c.ictid=d.fdtcltid where c.ictgctid=:ictgctid! and h.folno like :folno! and fdtcltnm like :cltnm! and h.foldt>=:start! and h.foldt<=:end! and h.FOLISCHG=:folischg! and h.foltype='makeRec' and h.folsta in ('recoiledhead','recoiled','recback') and h.folctid=:chggcltid! and h.FOLDT>to_date('20150425','YYYYMMDD') order by h.foldt
chg021_011=select decode(d.fdtmklr,'0','\u5DE6\u8033','1','\u53F3\u8033','\u65e0') as fdtmklr,d.fdtqnt,d.fdtprc,h.folno,h.foldt,h.folsta,h.foltype ,h.folischg,h.folnt ,decode(h.FOLURGFEE,null,'0',h.folurgfee) as folurgfee,h.foldps as deposit,(nvl(h.leftpay,0)+nvl(h.rightpay,0)) as xubaofee,d.fdtprc+(nvl(h.leftpay,0)+nvl(h.rightpay,0))-(decode(h.FOLDPS,null,'0',h.foldps)) as balance,d.fdtdisc as discount,c.ictaddr as foladdr,decode(d.fdtcltid,null,fdtcltnm,(select c.ictnm from tblindclient c where c.ictid=d.fdtcltid)) as cltnm, g.gctnm as folctnm,p.pdtnm as pdtnm from tblfoldetail d left outer join tblfolio h on h.folno=d.fdtfno left outer join tblgrpclient g on g.gctid=h.folctid left outer join tblproduct p on p.pdtid=d.fdtpid left outer join tblindclient c on c.ictid=d.fdtcltid where c.ictgctid=:ictgctid! and h.folno like :folno! and fdtcltnm like :cltnm! and h.foldt>=:start! and h.foldt<=:end! and h.FOLISCHG=:folischg! and h.foltype='geli' and h.folsta in ('recoiledhead','recoiled','recback') and h.folctid=:chggcltid! and h.FOLDT>to_date('20150425','YYYYMMDD') order by h.foldt
#chg03_000\u4e3a\u7ef4\u4fee\u5546\u54c1\u6536\u8d39\u4e2d\u7684repchgquery.jsp\u53d6\u6570\u636e\u7528\u5230\u7684sql\u8bed\u53e5
#chg03_001\u4e3a\u7ef4\u4fee\u5546\u54c1\u6536\u8d39\u4e2d\u7684repchgdetail.jsp\u53d6\u6570\u636e\u7528\u5230\u7684sql\u8bed\u53e5
#chg03_002\u4e3a\u7ef4\u4fee\u5546\u54c1\u6536\u8d39\u4fe1\u606f\u4fdd\u5b58\u5230\u6570\u636e\u5e93\u7684sql\u8bed\u53e5
chg03_000=select r.repfolid,r.repcltnm,r.repid,r.repdate,r.repgctid,r.repchgdt,r.repcpy,r.repamt,folischg,h.foltype,p.pdtnm as reppnm,g.gctnm as repgctnm from tblrep r left outer join tblproduct p on p.pdtid=r.reppid left outer join tblgrpclient g on g.gctid=r.repgctid left outer join tblfolio h on h.folno=r.REPFOLID where r.repgctid=:ictgctid! and h.foltype=:foltype! and h.folsta='finish' and r.repfolid like :repfolid! and r.repcltnm like :repcltnm! and h.folischg=:folischg!  and r.repsta='finish' and r.repdate>=:start! and r.repdate<=:end! and r.repgctid=:chggcltid!
chg03_001=select r.*,p.pdtid as pdtid,p.pdtnm as reppnm,g.gctnm as repgctnm from tblrep r left outer join tblproduct p on p.pdtid=r.reppid left outer join tblgrpclient g on g.gctid=r.repgctid where r.repfolid like :repfolid!
chg03_002=update tblrep set repchgdt=:repchgdt!,repischg=:folischg! where repfolid=:repfolid! 
chg03_003=update tblfolio set folsta=:folsta!,folchgdt=:repchgdt!,folischg=:folischg! where folno=:repfolid!
chg03_004=update tblfoldetail l set l.fdtdprc=:repamt! where l.fdtfno=:repfolid!
chg03_005=select r.repfolid,r.repcltnm,r.repid,r.repdate,r.repgctid,r.repchgdt,r.repcpy,r.repamt,folischg,h.foltype,p.pdtnm as reppnm,g.gctnm as repgctnm from tblrep r left outer join tblproduct p on p.pdtid=r.reppid left outer join tblgrpclient g on g.gctid=r.repgctid left outer join tblfolio h on h.folno=r.REPFOLID where r.repgctid=:ictgctid! and h.foltype=:foltype! and h.folsta='charged' and r.repfolid like :repfolid! and r.repcltnm like :repcltnm! and h.folischg=:folischg!  and r.repsta='finish' and r.repdate>=:start! and r.repdate<=:end! and r.repgctid=:chggcltid!
chg03_006=select r.repfolid,r.repcltnm,r.repid,r.repdate,r.repgctid,r.repchgdt,r.repcpy,r.repamt,folischg,h.foltype,p.pdtnm as reppnm,g.gctnm as repgctnm from tblrep r left outer join tblproduct p on p.pdtid=r.reppid left outer join tblgrpclient g on g.gctid=r.repgctid left outer join tblfolio h on h.folno=r.REPFOLID where r.repgctid=:ictgctid! and h.foltype=:foltype! and h.folsta in ('finish','charged') and r.repfolid like :repfolid! and r.repcltnm like :repcltnm! and h.folischg=:folischg!  and r.repsta='finish' and r.repdate>=:start! and r.repdate<=:end! and r.repgctid=:chggcltid!

#\u9000\u673a\u6536\u8d39\u7528\u5230\u7684sql\u8bed\u53e5
chg04_000=select d.*,d.FDTFNO as folno,decode(h.folischg,'0','\u5426','1','\u662f','\u65e0') as folischg,decode(h.FOLURGFEE,null,'0',h.folurgfee) as folurgfee,h.FOLCTID,h.FOLDT,h.FOLNT,h.FOLSTA,h.FOLDES,h.FOLSDT,h.FOLPDT,h.FOLDPS as deposit,h.FOLBAL as balance,h.folchgdt as chgdt,decode(c.ictgender,'0','\u5973','1','\u7537','\u65e0') as ictgender,d.fdtcltnm as cltnm,c.ictpcd as ictpcd,c.icttel as icttel,c.ictaddr as ictaddr,a.aaa103 as foltype,decode(d.fdtcltid,null,fdtcltnm,(select c.ictnm from tblindclient c where c.ictid=d.fdtcltid)) as cltnm, g.gctnm as folctnm,p.pdtprc as pdtprc,p.pdtnm as pdtnm,p.pdtid as pdtid,p.pdtut from tblfoldetail d left outer join tblfolio h on h.folno=d.fdtfno left outer join tblgrpclient g on g.gctid=h.folctid left outer join tblproduct p on p.pdtid=d.fdtpid left outer join tblindclient c on c.ictid=d.fdtcltid left outer join aa10 a on a.aaa102=h.foltype where d.fdtfno=:fdtfno!  and p.pdtid=:pdtid!  and c.ictnm like :ictnm! and a.aaa100='FOLTYPE' and h.folsta='finish'
chg04_001=update tblfolio set folchgdt=:chgdt!,folnt=:folnt!,folischg=:folischg!,foldps=:deposit!,folbal=:balance! where folno=:folno!
chg04_002=insert into tblsto (stoid\uff0c stogrcliid\uff0c stoproid\uff0c stoprotype\uff0c stoproname\uff0c stoamountun\uff0c stoamount\uff0cstoproprice, stoactype\uff0c stooprcd\uff0c stodate, stodisc,storemark) values (:stoid!, :stogrcliid!, :stoproid!, :stoprotype!, :stoproname!, :stoamountun!, :stoamount!\uff0c:stoproprice!, :stoactype!, :stooprcd!, :stodate!, :stodisc! ,:storemark!)
#chg04_003=select l.ncdid,g.gctnm,r.chggcltid,c.ictnm,r.chgcltid,l.ncdpid,p.pdtid,p.pdtnm,abs(l.ncdqnt) as ncdqnt,l.ncdrnt,l.ncdmon,r.chgdt,l.ncdsta,l.ncdnt,l.ncdrecdt,l.ncdrecheaddt,l.ncdoid,l.ncdrecmon  from tblnorchg r left join tblgrpclient g on r.chggcltid=g.gctid left join tblindclient c on r.chgcltid=c.ictid  join tblnorchgdetail l on r.chgid=l.ncdoid left join tblproduct p on l.ncdpid=p.pdtid   where l.ncdid=:ncdid! and g.gctnm like :gctnm! and c.ictnm like :ictnm! and p.pdtnm like :pdtnm! and l.ncdsta=:ncdsta! and l.ncdoid=:ncdoid!

chg04_003=select l.ncdid,g.gctnm,r.chggcltid,c.ictnm,r.chgcltid,l.ncdpid,p.pdtid,p.pdtnm,l.ncdqnt,l.ncdrnt,l.ncdmon,r.chgdt,l.ncdsta,l.ncdnt,l.ncdrecdt,l.ncdrecheaddt,l.ncdoid,l.ncdrecmon  from tblnorchg r left join tblgrpclient g on r.chggcltid=g.gctid left join tblindclient c on r.chgcltid=c.ictid  join tblnorchgdetail l on r.chgid=l.ncdid left join tblproduct p on l.ncdpid=p.pdtid   where l.ncdid=:ncdid! and g.gctnm like :gctnm! and c.ictnm like :ictnm! and p.pdtnm like :pdtnm! and l.ncdsta=:ncdsta! and l.ncdid=:ncdoid!
chg04_004=update tblnorchgdetail l set l.ncdsta=:ncdsta!,l.ncdrnt=:ncdrnt!,l.ncdrecmon=:ncdrecmon!,l.ncdrecdt=:ncdrecdt! where l.ncdid=:ncdid! and l.ncdpid=:ncdpid!
chg04_005=select l.ncdid,g.gctnm,r.chggcltid,c.ictnm,r.chgcltid,l.ncdpid,p.pdtnm,l.ncdqnt,l.ncdrnt,l.ncdmon,r.chgdt,l.ncdsta,l.ncdnt from tblnorchg r left join tblgrpclient g on r.chggcltid=g.gctid left join tblindclient c on r.chgcltid=c.ictid  join tblnorchgdetail l on r.chgid=l.ncdid left join tblproduct p on l.ncdpid=p.pdtid   where l.ncdsta='commited' and l.ncdid=:ncdid! and g.gctnm like :gctnm! and c.ictnm like :ictnm! and l.ncdpid like :ncdpid! and p.pdtnm like :pdtnm! and r.chgdt>=:start! and r.chgdt<=:end!
chg04_006=update tblnorchgdetail l set l.ncdsta=:ncdsta!,l.ncdrecexadt=:ncdrecexadt! where l.ncdoid=:ncdid! and l.ncdpid=:ncdpid!

chg04_018=update tblnorchgdetail l set l.ncdsta=:ncdsta!,l.ncdrecexadt=:ncdrecexadt! where l.ncdid=:ncdid! and l.ncdpid=:ncdpid!
chg04_007=insert into tblfoldetail (fdtfno,fdtcltid,fdtpid, fdtprc, fdtqnt, fdtsqnt, fdtrqnt, fdtdprc, fdtnt,fdtcltnm,fdtodt,fdtono,fdtrecmon) select SEQ_FOLNO.nextval,fdtcltid,fdtpid, fdtprc, -1, -1, -1, fdtdprc, :fdtnt!,fdtcltnm,:fdtodt!,:fdtfno!,:fdtrecmon! from tblfoldetail where fdtfno=:fdtfno!

chg04_008=select l.ncdid,g.gctnm,c.ictnm,r.chgdt,p.pdtid as ncdpid,p.pdtnm,p.pdtprc,l.ncdqnt,l.ncddis,l.ncdmon,l.ncdnt,l.ncdrnt,l.ncdrecmon,l.ncdsta from tblnorchg r left join tblgrpclient g on r.chggcltid=g.gctid left join tblindclient c on r.chgcltid=c.ictid join tblnorchgdetail l on r.chgid=l.ncdid left join tblproduct p on l.ncdpid=p.pdtid where l.ncdid=:chgid!
chg04_009=select r.chgid,g.gctnm,c.ictnm,r.chgdt,r.chgrecdt,r.chgrecheaddt from tblnorchg r left join tblgrpclient g on r.chggcltid=g.gctid left join tblindclient c on r.chgcltid=c.ictid where r.chggcltid=:chggcltid! and  r.chgid=:chgid! and g.gctnm like :gctnm! and c.ictnm like :ictnm! and r.chgdt>=:start! and r.chgdt<=:end!

chg04_010=update tblfoldetail d set d.fdtrecheaddt=:fdtrecheaddt! where d.fdtfno=:folno!
chg04_011=insert into tblnorchgdetail(ncdid,ncdpid,ncdqnt,ncddis,ncdmon,ncdnt,ncdsta,ncdrnt,ncdrecmon,ncdrecdt,ncdrecheaddt,ncdoid)select:ncdid!,ncdpid,:ncdqnt!,ncddis,:ncdmon!,ncdnt,ncdsta,:ncdrnt!,:ncdrecmon!,:ncdrecdt!,:ncdrecheaddt!,:ncdoid! from tblnorchgdetail where ncdid=:ncdoid! and ncdpid=:ncdpid!
chg04_012=update tblnorchgdetail l set l.ncdsta=:ncdsta!,l.ncdrecmon=:ncdrecmon!,l.ncdrnt=:ncdrnt! where l.ncdid=:ncdid! and l.ncdpid=:ncdpid!
chg04_013=update tblnorchgdetail l set l.ncdsta=:ncdsta!,l.ncdrecheaddt=:ncdrecheaddt! where l.ncdid=:ncdid! and l.ncdpid=:ncdpid!
chg04_017=update tblnorchgdetail l set l.ncdsta=:ncdsta!,l.ncdrecheaddt=:ncdrecheaddt! where l.ncdoid=:ncdid! and l.ncdpid=:ncdpid!
#chg04_014= select o.folno,g.gctnm,l.fdtcltnm,l.fdtpid,p.pdtnm,p.pdtprc,l.fdtdisc,o.foldps,o.folischg,l.fdtprc-(decode(o.FOLDPS,null,'0',o.foldps)) as balance,l.fdtrecmon,o.foldt,o.folchgdt,l.fdtodt,l.fdtrecheaddt,o.folsta,o.folsta,(case o.folsta when 'charged' then '\u5df2\u6536\u8d39',when 'recpass' then '\u9000\u673a\u5df2\u5ba1\u6838' when 'recback' then '\u9000\u673a\u5df2\u56de\u9000' when 'recoiled' then '\u9000\u673a\u5230\u76f4\u5c5e\u5e97' when 'recoiledhead' then '\u9000\u673a\u5230\u603b\u90e8' end)as state,o.folnt from tblfoldetail l join tblfolio o on l.fdtono=o.folno left join tblproduct p on l.fdtpid= p.pdtid left join tblgrpclient g on g.gctid=o.folctid where o.foltype='makeRec' and folno=:folno! and gctnm like :gctnm! and fdtcltnm like :fdtcltnm! and folsta=:folsta!

chg04_014= select l.fdtexadt,o.folno,g.gctnm,l.fdtcltnm,l.fdtpid,p.pdtnm,p.pdtprc,l.fdtdisc,(nvl(o.leftpay,0)+nvl(o.rightpay,0)) as xubaofee,o.foldps,decode(o.FOLURGFEE,null,'0',o.folurgfee) as folurgfee,o.folischg,l.fdtprc+(nvl(o.leftpay,0)+nvl(o.rightpay,0))+(decode(o.FOLURGFEE,null,'0',o.folurgfee))-(decode(o.FOLDPS,null,'0',o.foldps)) as balance,l.fdtrecmon,o.foldt,o.folchgdt,l.fdtodt,l.fdtrecheaddt,o.folsta,o.folnt,m.tmksid,m.tmkpnl  from tblfoldetail l join tblfolio o on l.fdtfno=o.folno left join tblproduct p on l.fdtpid= p.pdtid left join tblgrpclient g on g.gctid=o.folctid  left join tblmaking m on l.fdtfno=m.tmkfno   where o.foltype in ('make','makeEar') and folno=:folno! and gctnm like :gctnm! and fdtcltnm like :ictnm! and folsta=:folsta!  and p.pdtnm like :pdtnm!

chg04_015=update tblfoldetail l set l.fdtrecmon=:fdtrecmon!,l.fdtodt=:fdtodt! where l.fdtfno=:fdtfno! and l.fdtpid=:fdtpid!

chg04_016=update tblfoldetail d set d.fdtrecheaddt=:fdtrecheaddt! where d.fdtono=:folno!
chg04_019=insert into tblnorchgdetail(ncdid,ncdpid,ncdqnt,ncddis,ncdmon,ncdnt,ncdrecdt,ncdypname,ncdisspdisc,ncdsta,ncdjsid,ncdrepdate) values (:ncdid!,:ncdpid!,:ncdqnt!,:ncddis!,:ncdmon!,:ncdnt!,:ncdrecdt!,:ncdypname!,:ncdisspdisc!,:ncdsta!,:jsid!,:baoxiudate!)















